var travel_package;(()=>{"use strict";var t=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function l(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((o=o.apply(t,e||[])).next())}))};const e=new class{constructor(){this.baseUrl="https://next-holiday-webflow-api.onrender.com"}get(e,n){return t(this,void 0,void 0,(function*(){const t=new URL(`${this.baseUrl}${e}`);n&&(t.search=new URLSearchParams(n.params).toString());const o=yield fetch(t);return yield o.json()}))}post(e,n){return t(this,void 0,void 0,(function*(){const t=yield fetch(`${this.baseUrl}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.body)});return yield t.json()}))}};var n=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function l(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((o=o.apply(t,e||[])).next())}))};const o=new class{bookDiyUmrah(t){return n(this,void 0,void 0,(function*(){return yield e.post("/book-diy-umrah",{body:t})}))}bookTravelPackage(t){return n(this,void 0,void 0,(function*(){return yield e.post("/book-travel-package",{body:t})}))}getFlights(t){return n(this,void 0,void 0,(function*(){return(yield e.get("/flights",{params:{originLocationCode:t.originLocationCode,destinationLocationCode:t.destinationLocationCode,departureDate:t.departureDate,adults:t.bookingForm.totalAdult.toString(),children:t.bookingForm.totalChild.toString(),infants:t.bookingForm.totalInfant.toString(),travelClass:t.bookingForm.seatClass.type}})).data}))}getHotels(){return n(this,void 0,void 0,(function*(){return(yield e.get("/hotels")).data}))}getVans(){return n(this,void 0,void 0,(function*(){return(yield e.get("/vans")).data}))}getMeals(){return n(this,void 0,void 0,(function*(){return(yield e.get("/meals")).data}))}getVisas(){return n(this,void 0,void 0,(function*(){return(yield e.get("/visas")).data}))}getInsurances(){return n(this,void 0,void 0,(function*(){return(yield e.get("/insurances")).data}))}getAddOnServices(){return n(this,void 0,void 0,(function*(){return(yield e.get("/add-on-services")).data}))}};const r=new class{constructor(){const t=document.getElementById("modal-close-button"),e=document.getElementById("modal-cancel-button"),n=document.getElementById("modal-restart-button");t&&(t.onclick=()=>this.toggleModal("modal-overlay",!1)),e&&(e.onclick=()=>this.toggleModal("modal-overlay",!1)),n&&(n.onclick=()=>{this.toggleModal("modal-overlay",!1),window.location.reload()})}preventEvent(t){t.preventDefault(),t.stopPropagation()}preventTab(t){"Tab"==t.key&&(t.preventDefault(),t.stopPropagation())}toggleModal(t,e){return n=this,o=void 0,i=function*(){const n=document.getElementById(t);e?(n.style.opacity="0%",n.firstChild.style.transform="translateY(50px)",n.style.display="flex",yield new Promise((t=>setTimeout(t,100))),n.style.opacity="100%",n.firstChild.style.transform="translateY(0px)"):(n.style.opacity="0%",n.firstChild.style.transform="translateY(50px)",yield new Promise((t=>setTimeout(t,300))),n.style.display="none"),document.body.style.overflow=e?"hidden":"",document.body.style.userSelect=e?"none":"",e?(document.addEventListener("keydown",this.preventTab,!0),document.addEventListener("scroll",this.preventEvent,!0),document.addEventListener("wheel",this.preventEvent,{passive:!1})):(document.removeEventListener("keydown",this.preventTab,!0),document.removeEventListener("scroll",this.preventEvent,!0),document.removeEventListener("wheel",this.preventEvent))},new((r=void 0)||(r=Promise))((function(t,e){function a(t){try{c(i.next(t))}catch(t){e(t)}}function l(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,l)}c((i=i.apply(n,o||[])).next())}));var n,o,r,i}},i=new class{constructor(t){this.isLoading=!1,this.modalController=t,document.getElementById("loading-icon").style.display="none"}showLoading(t){this.isLoading=t;const e=document.getElementsByClassName("button-disabled");for(let t=0;t<e.length;t++)e[t].style.display=this.isLoading?"block":"none";const n=document.getElementById("arrow-icon"),o=document.getElementById("loading-icon");n&&(n.style.display=this.isLoading?"none":"block"),o&&(o.style.display=this.isLoading?"block":"none"),this.modalController.toggleModal("loading-overlay",this.isLoading)}}(r),a=document.getElementById("adult-counter"),l=document.getElementById("child-counter"),c=document.getElementById("infant-counter"),s=document.getElementById("submit-button"),d=document.querySelectorAll(".price-text"),u=parseInt(d[0].innerHTML);let y={};function m(){const t=parseInt(a.querySelector(".counter-label").textContent),e=parseInt(l.querySelector(".counter-label").textContent),n=parseInt(c.querySelector(".counter-label").textContent),o=t+e+n;y.totalAdult=t,y.totalChild=e,y.totalInfant=n;const r=u*o;return d[0].innerHTML=r.toLocaleString(),d[1].innerHTML=r.toLocaleString(),d[2].innerHTML=(.05*r).toLocaleString(),o}m(),function(){const t=document.querySelector("input[name=travel-date]"),e=new Date;e.setDate(e.getDate()+14),t.min=e.toISOString().split("T")[0]}(),s.onclick=()=>{return t=void 0,e=void 0,r=function*(){if(document.querySelector("form").reportValidity()){y={packageSlug:document.querySelector("html").getAttribute("data-wf-item-slug"),totalAdult:parseInt(a.querySelector(".counter-label").textContent),totalChild:parseInt(l.querySelector(".counter-label").textContent),totalInfant:parseInt(c.querySelector(".counter-label").textContent),travelDate:document.querySelector("input[name=travel-date]").value,fullName:document.querySelector("input[name=full-name]").value,email:document.querySelector("input[name=email]").value,phone:document.querySelector("input[name=phone]").value,nricNumber:document.querySelector("input[name=nric-number]").value};try{i.showLoading(!0);const t=yield o.bookTravelPackage(y);window.location.href=t.data.paymentLink,i.showLoading(!1)}catch(t){i.showLoading(!1),console.log(t)}}},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function l(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r},[a,l,c].forEach((t=>{t.getElementsByClassName("counter-button subtract")[0].onclick=()=>function(t){const e="adult-counter"==t.id?1:0,n=t.querySelector(".counter-label"),o=parseInt(n.textContent);n.textContent=(o<=e?e:o-1).toString(),m()}(t),t.getElementsByClassName("counter-button add")[0].onclick=()=>function(t){if(m()>=8)return;const e=t.querySelector(".counter-label"),n=parseInt(e.textContent);e.textContent=(n>=8?8:n+1).toString(),m()}(t)})),travel_package={}})();