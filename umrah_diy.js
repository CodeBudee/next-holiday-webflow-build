var umrah_diy;(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{cityController:()=>A,flightController:()=>E,hotelController:()=>v,loaderController:()=>y,modalController:()=>p,passengerController:()=>L,personController:()=>f,serviceController:()=>N,stepperController:()=>S,summary:()=>I,transportationController:()=>T,visaController:()=>C});const n=[{code:"AN",name:"ADVANCED AIR"},{code:"A3",name:"AEGEAN AIRLINES S.A."},{code:"EI",name:"AER LINGUS"},{code:"SU",name:"AEROFLOT RUSSIAN AIRLINES"},{code:"AR",name:"AEROLINEAS ARGENTINAS"},{code:"VW",name:"AEROMAR"},{code:"AM",name:"AEROMEXICO"},{code:"AV",name:"AEROVIAS DEL CONTINENTE AMERICANO"},{code:"SB",name:"AIR CALEDONIE INTL"},{code:"AC",name:"AIR CANADA"},{code:"CA",name:"AIR CHINA LIMITED"},{code:"UX",name:"AIR EUROPA LINEAS AEREAS S.A."},{code:"AF",name:"AIR FRANCE"},{code:"PX",name:"AIR NIUGINI"},{code:"NZ",name:"AIR NEW ZEALAND LIMITED"},{code:"RS",name:"AIR SEOUL"},{code:"TN",name:"AIR TAHITI NUI"},{code:"AS",name:"ALASKA AIRLINES INC."},{code:"AZ",name:"ALITALIA-COMPAGNIA AEREA ITALIANA "},{code:"NH",name:"ALL NIPPON AIRWAYS CO. LTD."},{code:"AA",name:"AMERICAN AIRLINES INC."},{code:"GP",name:"APG AIRLINES/APG AIRLINES"},{code:"OZ",name:"ASIANA AIRLINES INC."},{code:"OS",name:"AUSTRIAN AIRLINES AG DBA AUSTRIAN"},{code:"9V",name:"AVIOR AIRLINES C.A."},{code:"AD",name:"AZUL LINHAS AEREAS BRASILEIRAS"},{code:"TF",name:"BRAATHENS"},{code:"BA",name:"BRITISH AIRWAYS P.L.C."},{code:"SN",name:"BRUSSELS AIRLINES"},{code:"9K",name:"CAPE AIR"},{code:"BW",name:"CARIBBEAN AIRLINES LIMITED"},{code:"KA",name:"CATHAY DRAGON AIRLINES"},{code:"CX",name:"CATHAY PACIFIC AIRWAYS LTD."},{code:"CI",name:"CHINA AIRLINES"},{code:"MU",name:"CHINA EASTERN AIRLINES"},{code:"CZ",name:"CHINA SOUTHERN AIRLINES"},{code:"CM",name:"COMPANIA PANAMENA DE AVIACION S.A."},{code:"DL",name:"DELTA AIR LINES INC."},{code:"U2",name:"EASYJET"},{code:"MS",name:"EGYPTAIR"},{code:"LY",name:" EL AL ISRAEL AIRLINES LTD."},{code:"EK",name:"EMIRATES "},{code:"ET",name:"ETHIOPIAN AIRLINES ENTERPRISE "},{code:"EY",name:"ETIHAD AIRWAYS  "},{code:"EW",name:"EUROWINGS"},{code:"BR",name:"EVA AIRWAYS CORPORATION"},{code:"FJ",name:"FIJI AIRWAYS"},{code:"AY",name:"FINNAIR"},{code:"F9",name:"FRONTIER AIRLINES INC."},{code:"GA",name:"GARUDA INDONESIA"},{code:"G3",name:"GOL LINHAS AEREAS"},{code:"HC",name:"GROUPE AIR SENEGAL (SENEGAL AIRLINES)"},{code:"GF",name:"GULF AIR"},{code:"HA",name:"HAWAIIAN AIRLINES INC."},{code:"IB",name:"IBERIA"},{code:"4O",name:"INTERJET"},{code:"JL",name:"JAPAN AIRLINES CO. LTD."},{code:"7C",name:"JEJU AIR CO. LTD."},{code:"B6",name:"JETBLUE AIRWAYS CORPORATION"},{code:"KG",name:"KEY LIME AIR/DBA DENVER CONNECTIONS"},{code:"KL",name:"KLM ROYAL DUTCH AIRLINES"},{code:"KE",name:"KOREAN AIR LINES CO. LTD."},{code:"KU",name:"KUWAIT AIRWAYS"},{code:"QV",name:"LAO AIRLINES"},{code:"LA",name:"LATAM AIRLINES S.A."},{code:"JJ",name:"LATAM BRAZIL"},{code:"XL",name:"LATAM ECUADOR"},{code:"LO",name:"LOT - POLISH AIRLINES"},{code:"LH",name:"LUFTHANSA"},{code:"MH",name:"MALAYSIA AIRLINE"},{code:"OD",name:"MALINDO AIR"},{code:"ME",name:"MIDDLE EAST AIRLINES AIRLIBAN "},{code:"DY",name:"NORWEGIAN"},{code:"D8",name:"NORWEGIAN"},{code:"DI",name:"NORWEGIAN"},{code:"WY",name:"OMAN AIR"},{code:"8P",name:"PACIFIC COASTAL"},{code:"PK",name:"PAKISTAN AIRLINES"},{code:"PR",name:"PHILIPPINE AIRLINES INC."},{code:"PD",name:"PORTER AIRLINES"},{code:"CG",name:"PNG AIR"},{code:"P0",name:"PROFLIGHT COMMUTER"},{code:"QF",name:"QANTAS AIRWAYS LTD."},{code:"QR",name:"QATAR AIRWAYS"},{code:"4P",name:"REGIONAL SKY/ PUBLIC CHARTERS"},{code:"SV",name:"SAUDI ARABIAN AIRLINES"},{code:"SK",name:"SCANDINAVIAN AIRLINES SYSTEM (SAS)"},{code:"MI",name:"SILKAIR (S) PTE. LTD."},{code:"SQ",name:"SINGAPORE AIRLINES LIMITED"},{code:"IE",name:"SOLOMON AIRLINES"},{code:"9X",name:"SOUTHERN AIRWAYS"},{code:"WN",name:"SOUTHWEST AIRLINES CO."},{code:"NK",name:"SPIRIT AIRLINES"},{code:"SY",name:"SUN COUNTRY AIRLINES"},{code:"LX",name:"SWISS INTERNATIONAL AIR LINES LTD"},{code:"EQ",name:"TAME LINEA AEREA DEL ECUADOR"},{code:"TP",name:"TAP - AIR PORTUGAL"},{code:"RO",name:"TAROM"},{code:"TG",name:"THAI AIRWAYS INTERNATIONAL PUBLIC"},{code:"TJ",name:"TRADEWIND AVIATION"},{code:"VW",name:"TRANSPORTES AEROMAR S.A. DE C.V."},{code:"TK",name:"TURKISH AIRLINES INC."},{code:"UA",name:"UNITED AIRLINES INC."},{code:"U6",name:"URAL AIRLINES"},{code:"VN",name:" VIETNAM AIRLINES CORPORATION"},{code:"VS",name:"VIRGIN ATLANTIC"},{code:"VA",name:"VIRGIN AUSTRALIA INTERNATIONAL AIRLINES"},{code:"VY",name:"VUELING"},{code:"WS",name:"WESTJET"}];var o=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};const i=new class{constructor(){this.baseUrl="https://next-holiday-webflow-api.onrender.com"}get(e,t){return o(this,void 0,void 0,(function*(){const n=new URL(`${this.baseUrl}${e}`);t&&(n.search=new URLSearchParams(t.params).toString());const o=yield fetch(n);return yield o.json()}))}post(e,t){return o(this,void 0,void 0,(function*(){const n=yield fetch(`${this.baseUrl}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.body)});return yield n.json()}))}};var r=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};const a=new class{bookDiyUmrah(e){return r(this,void 0,void 0,(function*(){return yield i.post("/book-diy-umrah",{body:e})}))}bookTravelPackage(e){return r(this,void 0,void 0,(function*(){return yield i.post("/book-travel-package",{body:e})}))}getFlights(e){return r(this,void 0,void 0,(function*(){return(yield i.get("/flights",{params:{originLocationCode:e.originLocationCode,destinationLocationCode:e.destinationLocationCode,departureDate:e.departureDate,adults:e.bookingForm.totalAdult.toString(),children:e.bookingForm.totalChild.toString(),infants:e.bookingForm.totalInfant.toString(),travelClass:e.bookingForm.seatClass.type}})).data}))}getHotels(){return r(this,void 0,void 0,(function*(){return(yield i.get("/hotels")).data}))}getVans(){return r(this,void 0,void 0,(function*(){return(yield i.get("/vans")).data}))}getMeals(){return r(this,void 0,void 0,(function*(){return(yield i.get("/meals")).data}))}getVisas(){return r(this,void 0,void 0,(function*(){return(yield i.get("/visas")).data}))}getInsurances(){return r(this,void 0,void 0,(function*(){return(yield i.get("/insurances")).data}))}getAddOnServices(){return r(this,void 0,void 0,(function*(){return(yield i.get("/add-on-services")).data}))}};function l(e){const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}function s(e,t){const n=new Date(e),o=new Date(t),i=Math.abs(n.getTime()-o.getTime());return Math.ceil(i/864e5)}function c(e,t){const n=new Date(`1970-01-01T${e}`),o=new Date(`1970-01-01T${t}`),i=n.getTime()-6e4*n.getTimezoneOffset(),r=o.getTime()-6e4*o.getTimezoneOffset(),a=Math.abs(r-i);return`${Math.floor(a/36e5)}h ${Math.floor(a%36e5/6e4)}m`}var d=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},u=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))},h=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};function m(e,t,n=1){return`MYR ${(parseInt(e.toString().replace("MYR","").replace(" ","").replace(",",""))*parseInt(t.toString())*parseInt(n.toString())).toLocaleString()}`}let g={currency:"MYR",plans:[],totalAdult:1,totalChild:0,totalInfant:0,totalPax:1,seatClass:{label:"Economy",type:"ECONOMY"},departFlight:null,returnFlight:null,hotels:[],transportation:null,visa:null,insurances:[],addOnServices:[],tourGuide:null,passengers:[]};const p=new class{constructor(){const e=document.getElementById("modal-close-button"),t=document.getElementById("modal-cancel-button"),n=document.getElementById("modal-restart-button");e&&(e.onclick=()=>this.toggleModal("modal-overlay",!1)),t&&(t.onclick=()=>this.toggleModal("modal-overlay",!1)),n&&(n.onclick=()=>{this.toggleModal("modal-overlay",!1),window.location.reload()})}preventEvent(e){e.preventDefault(),e.stopPropagation()}preventTab(e){"Tab"==e.key&&(e.preventDefault(),e.stopPropagation())}toggleModal(e,t){return n=this,o=void 0,r=function*(){const n=document.getElementById(e);t?(n.style.opacity="0%",n.firstChild.style.transform="translateY(50px)",n.style.display="flex",yield new Promise((e=>setTimeout(e,100))),n.style.opacity="100%",n.firstChild.style.transform="translateY(0px)"):(n.style.opacity="0%",n.firstChild.style.transform="translateY(50px)",yield new Promise((e=>setTimeout(e,300))),n.style.display="none"),document.body.style.overflow=t?"hidden":"",document.body.style.userSelect=t?"none":"",t?(document.addEventListener("keydown",this.preventTab,!0),document.addEventListener("scroll",this.preventEvent,!0),document.addEventListener("wheel",this.preventEvent,{passive:!1})):(document.removeEventListener("keydown",this.preventTab,!0),document.removeEventListener("scroll",this.preventEvent,!0),document.removeEventListener("wheel",this.preventEvent))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{s(r.next(e))}catch(e){t(e)}}function l(e){try{s(r.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,l)}s((r=r.apply(n,o||[])).next())}));var n,o,i,r}},y=new class{constructor(e){this.isLoading=!1,this.modalController=e,document.getElementById("loading-icon").style.display="none"}showLoading(e){this.isLoading=e;const t=document.getElementsByClassName("button-disabled");for(let e=0;e<t.length;e++)t[e].style.display=this.isLoading?"block":"none";const n=document.getElementById("arrow-icon"),o=document.getElementById("loading-icon");n&&(n.style.display=this.isLoading?"none":"block"),o&&(o.style.display=this.isLoading?"block":"none"),this.modalController.toggleModal("loading-overlay",this.isLoading)}}(p),I=new class{constructor(){const e=document.getElementById("seat-class"),t=this.validateQueryParams();g.totalAdult=parseInt(t.adults),g.totalChild=parseInt(t.children),g.totalInfant=parseInt(t.infants),g.totalPax=g.totalInfant+g.totalChild+g.totalAdult,g.seatClass={label:e.options[e.selectedIndex].text,type:t.seatType},g.plans=[{city:{name:t.city,iataCode:"Makkah"==t.city?"JED":"MED"},startDate:t.departure,endDate:t.return}]}getBookingForm(){return g}getTotalDays(){return g.plans.reduce(((e,t)=>e+s(l(t.endDate),l(t.startDate))),0)}getTotalDaysIn(e){var t;const n=null!==(t=g.plans.filter((t=>t.city.name.toLowerCase()===e.toLowerCase()))[0])&&void 0!==t?t:null;if(null==n)return 0;const o=l(n.startDate),i=l(n.endDate);return n?s(i,o):0}getTotalNightsIn(e){return this.getTotalDaysIn(e)-1}updateBookingForm(e){g=e,this.updateParams(),this.renderSummary()}updateParams(){const e={city:g.plans[0].city.name,adults:g.totalAdult.toString(),children:g.totalChild.toString(),infants:g.totalInfant.toString(),departure:g.plans[0].startDate,return:g.plans[0].endDate,seatType:g.seatClass.type},t=new URLSearchParams(e).toString(),n=new URL(window.location.href);n.search=t,window.history.replaceState({},"",n.toString())}validateQueryParams(){var e,t,n;const o={city:"Makkah",adults:1,childresn:0,infants:0,departure:this.formatDate(this.addDays(Date(),14)),return:this.formatDate(this.addDays(Date(),19)),seatType:"ECONOMY"},i=new URLSearchParams(window.location.search),r=i.get("city"),a=null!==(e=parseInt(i.get("adults"),10))&&void 0!==e?e:1,l=null!==(t=parseInt(i.get("children"),10))&&void 0!==t?t:0,s=null!==(n=parseInt(i.get("infants"),10))&&void 0!==n?n:0,c=i.get("departure"),d=i.get("return"),u=i.get("seatType"),h=()=>a+l+s<=8,m=e=>!isNaN(e)&&e>=0,g=e=>/^\d{4}-\d{2}-\d{2}$/.test(e),p=(e,t)=>new Date(e)<new Date(t),y=e=>{const t=this.addDays(Date(),14),n=this.addDays(Date(),60),o=new Date(e);return o>=t&&o<=n},I={city:(L=r,["Makkah","Madinah"].includes(L)?r:o.city),adults:(e=>!isNaN(e)&&e>=1)(a)&&h()?a.toString():o.adults.toString(),children:m(l)&&h()?l.toString():o.childresn.toString(),infants:m(s)&&h()&&(e=>e<=a)(s)?s.toString():o.infants.toString(),departure:g(c)&&p(c,d)&&y(c)&&y(d)?c:o.departure,return:g(d)&&p(c,d)&&y(c)&&y(d)?d:o.return,seatType:(S=u,["ECONOMY","PREMIUM_ECONOMY","BUSINESS","FIRST"].includes(S)?u:o.seatType)};var S,L;const A=new URLSearchParams(I).toString(),f=new URL(window.location.href);return f.search=A,window.history.replaceState({},"",f.toString()),I}addDays(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}formatDate(e){return e.toISOString().split("T")[0]}renderSummary(){this.renderPersonSummary(),this.renderFlightSummary(),this.renderHotelSummary(),this.renderTransportationSummary(),this.renderTransportationSummary(),this.renderVisaSummary(),this.renderInsuranceSummary(),this.renderTourGuideSummary(),this.renderAddOnSummary()}renderPersonSummary(){document.getElementById("departure-class").innerText=g.seatClass.label,document.getElementById("return-class").innerText=g.seatClass.label,document.getElementById("total-adult-text").textContent=`${g.totalAdult} × Adult`,document.getElementById("total-child-text").textContent=`${g.totalChild} × Child`,document.getElementById("total-infant-text").textContent=`${g.totalInfant} × Infant`,document.getElementById("total-pax-text").textContent=`${g.totalPax} Pax`,document.getElementById("pax-dropdown-text").innerText=`${g.totalAdult} × Adult, ${g.totalChild} × Child, ${g.totalInfant} × Infant`}renderFlightSummary(){var e,t,n,o;const i=document.getElementById("flight-summary-card"),r=document.getElementById("departure-flight-summary"),a=document.getElementById("return-flight-summary");i.style.display=g.departFlight||g.returnFlight?"flex":"none",(g.departFlight||g.returnFlight)&&(r.style.display=g.departFlight?"flex":"none",document.getElementById("departure-flight-summary-destination").innerText=g.plans[0].city.iataCode,document.getElementById("departure-flight-summary-total").innerText=`${null===(e=g.departFlight)||void 0===e?void 0:e.totalFare.currency} ${parseInt(null===(t=g.departFlight)||void 0===t?void 0:t.totalFare.totalPrice.toLocaleString()).toLocaleString()}`,document.getElementById("departure-flight-summary-calculation").innerText=`${g.totalPax} pax`,a.style.display=g.returnFlight?"flex":"none",document.getElementById("return-flight-summary-origin").innerText=g.plans[g.plans.length-1].city.iataCode,document.getElementById("return-flight-summary-total").innerText=`${null===(n=g.returnFlight)||void 0===n?void 0:n.totalFare.currency} ${parseInt(null===(o=g.returnFlight)||void 0===o?void 0:o.totalFare.totalPrice.toLocaleString()).toLocaleString()}`,document.getElementById("return-flight-summary-calculation").innerText=`${g.totalPax} pax`)}renderHotelSummary(){const e=document.getElementById("hotel-summary-card");if(e.style.display=g.hotels.length>0?"flex":"none",g.hotels.length<=0)return;const t=e.querySelector(".summary-item-list"),n=t.querySelectorAll(".row-expand");t.innerHTML="";for(let e=0;e<g.hotels.length;e++){const o=g.hotels[e],i=n[0].cloneNode(!0),r=this.getTotalNightsIn(o.data.city);let a=0,l=i.querySelector(".flight-summary-wrapper");if(l.innerHTML="",o.totalDouble>0){const e=`${g.currency} ${o.data.doublePrice.toLocaleString()}`;a+=o.totalDouble*o.data.doublePrice,l.innerHTML.length>0&&(l.innerHTML+="<br/>"),l.innerHTML+=`${e} × ${o.totalDouble} rooms × ${r} nights`}if(o.totalTripple>0){const e=`${g.currency} ${o.data.triplePrice.toLocaleString()}`;a+=o.totalTripple*o.data.triplePrice,l.innerHTML.length>0&&(l.innerHTML+="<br/>"),l.innerHTML+=`${e} × ${o.totalTripple} rooms × ${r} nights`}if(o.totalQuad>0){const e=`${g.currency} ${o.data.quadPrice.toLocaleString()}`;a+=o.totalQuad*o.data.quadPrice,l.innerHTML.length>0&&(l.innerHTML+="<br/>"),l.innerHTML+=`${e} × ${o.totalQuad} rooms × ${r} nights`}if(o.includeMeal){const e=`${g.currency} ${o.data.meal.price.toLocaleString()}`;a+=o.data.meal.price*g.totalPax,l.innerHTML.length>0&&(l.innerHTML+="<br/>"),l.innerHTML+=`${e} × ${g.totalPax} pax meals × ${r} nights`}i.querySelector(".hotel-summary-title").innerHTML=o.data.name,i.querySelector(".subtitle").innerHTML=m(a,r),t.appendChild(i)}}renderTransportationSummary(){if(document.getElementById("transportation-summary-card").style.display=g.transportation?"flex":"none",!g.transportation)return;let e=g.currency,t="",n="",o="";if(Array.isArray(g.transportation)){let i=0;for(let t=0;t<g.transportation.length;t++){const n=g.transportation[t],r=`• ${e} ${n.data.price} × ${n.totalVehicles} vehicles`;i+=n.totalVehicles*n.data.price,o.length>0&&(o+="<br/>"),o+=r}n="Van",t=m(i,1)}else"itineraries"in g.transportation&&(n="Flight",e=g.transportation.totalFare.currency,t=g.transportation.totalFare.totalPrice.toLocaleString(),o=`${g.totalPax} pax`);document.getElementById("transportation-summary-title").innerHTML=n,document.getElementById("transportation-summary-origin").innerHTML=g.plans[0].city.name,document.getElementById("transportation-summary-destination").innerHTML=g.plans[g.plans.length-1].city.name,document.getElementById("transportation-summary-calculation").innerHTML=o,document.getElementById("transportation-summary-total").innerHTML=t}renderVisaSummary(){var e,t,n,o;const i=document.getElementById("visa-summary-card"),r=document.querySelector("input[name=visa]:checked"),a=null!==(o=null===(n=null===(t=null===(e=null==r?void 0:r.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector(".price-text"))||void 0===n?void 0:n.textContent)&&void 0!==o?o:"";i.style.display=null==g.visa?"none":"flex",null!=g.visa&&(i.querySelector("#visa-summary-type").textContent=g.visa.name,i.querySelector("#visa-summary-calculation").textContent=`${g.currency} ${a} x ${g.totalPax} pax`,i.querySelector("#visa-summary-total").textContent=m(a,g.totalPax))}renderInsuranceSummary(){const e=document.getElementById("insurance-summary-card");if(e.style.display=g.insurances.length>0?"flex":"none",g.insurances.length<=0)return;const t=e.querySelector(".summary-item-list"),n=t.querySelectorAll(".row-expand");t.innerHTML="";for(let e=0;e<g.insurances.length;e++){const o=g.insurances[e],i=n[0].cloneNode(!0);i.querySelector("#insurance-summary-type").textContent=o.name,i.querySelector("#insurance-summary-calculation").textContent=`${g.currency} ${o.price} x ${g.totalPax} pax`,i.querySelector("#insurance-summary-total").textContent=m(o.price,g.totalPax),t.appendChild(i)}}renderTourGuideSummary(){var e,t;const n=document.getElementById("tour-guide-summary-card"),o=null!==(t=null===(e=document.querySelector("input[name=tour-guide]:checked").parentElement.parentElement.querySelector(".price-text"))||void 0===e?void 0:e.textContent)&&void 0!==t?t:"";n.style.display=null==g.tourGuide?"none":"flex",null!=g.tourGuide&&(n.querySelector("#tour-guide-summary-type").textContent=g.tourGuide.type,"totalDays"in g.tourGuide?(n.querySelector("#tour-guide-summary-calculation").textContent=`${g.currency} ${o} x ${g.tourGuide.totalDays} days`,n.querySelector("#tour-guide-summary-total").textContent=m(o,g.tourGuide.totalDays)):(n.querySelector("#tour-guide-summary-calculation").textContent=`${g.currency} ${o}`,n.querySelector("#tour-guide-summary-total").textContent=m(o,1)))}renderAddOnSummary(){const e=document.getElementById("add-on-service-summary-card");if(e.style.display=g.addOnServices.length>0?"flex":"none",g.addOnServices.length<=0)return;const t=e.querySelector(".summary-item-list"),n=t.querySelectorAll(".row-expand");t.innerHTML="";for(let e=0;e<g.addOnServices.length;e++){const o=g.addOnServices[e],i=n[0].cloneNode(!0);i.querySelector("#add-on-summary-type").textContent=o.name,i.querySelector("#add-on-summary-calculation").textContent=`${g.currency} ${o.price}`,i.querySelector("#add-on-summary-total").textContent=m(o.price,1),t.appendChild(i)}}},S=new class{constructor(){this.currentIndex=0,this.steps=document.querySelectorAll(".step"),this.stepLines=document.querySelectorAll(".step-line"),this.stepIndicators=document.querySelectorAll(".step-indicator"),this.prevButton=document.getElementById("prev-step-button"),this.nextButton=document.getElementById("next-step-button"),this.payDepositButton=document.getElementById("pay-deposit-button"),this.prevButton.onclick=()=>this.prev(),this.nextButton.onclick=()=>this.next(),this.goTo(this.currentIndex)}goTo(e){if(!y.isLoading){this.currentIndex=e,window.scrollTo(0,0);for(let e=0;e<this.stepLines.length;e++){const t=this.stepLines[e];t.classList.remove("in-progress","done"),this.currentIndex==e+1?t.classList.add("in-progress"):e+1<this.currentIndex?t.classList.add("done"):t.classList.remove("in-progress","done")}for(let e=0;e<this.stepIndicators.length;e++){const t=this.stepIndicators[e];t.classList.remove("in-progress","done"),this.currentIndex==e?t.classList.add("in-progress"):e<this.currentIndex?t.classList.add("done"):t.classList.remove("in-progress","done")}for(let e=0;e<this.steps.length;e++){const t=document.getElementsByClassName("card-form")[e];this.currentIndex==e?t.style.display="flex":t.style.display="none"}0==this.currentIndex?this.prevButton.style.visibility="hidden":this.prevButton.style.visibility="visible",this.currentIndex==this.steps.length-1?(this.payDepositButton.classList.remove("hide"),this.nextButton.classList.add("hide")):(this.payDepositButton.classList.add("hide"),this.nextButton.classList.remove("hide"))}}prev(){1!=this.currentIndex?this.currentIndex>0&&(this.currentIndex--,3==this.currentIndex&&I.getBookingForm().plans.length<=1&&this.currentIndex--,this.goTo(this.currentIndex)):p.toggleModal("modal-overlay",!0)}next(){this.currentIndex<this.steps.length&&(this.currentIndex++,3==this.currentIndex&&I.getBookingForm().plans.length<=1&&this.currentIndex++,this.goTo(this.currentIndex))}},L=new class{constructor(){document.getElementById("pay-deposit-button").onclick=()=>this.payDeposit(),this.setupInputs()}setupInputs(){const e=document.getElementById("adult-collection-list"),t=document.getElementById("child-collection-list"),n=document.getElementById("infant-collection-list");this.adultInputs=e.firstElementChild,this.childInputs=t.firstElementChild,this.infantInputs=n.firstElementChild}isValidated(){const e=I.getBookingForm(),t=document.getElementsByTagName("form")[0].reportValidity();if(!t)return!1;const n=document.getElementById("passenger-card").querySelectorAll(".card-body");return e.passengers=[],n.forEach((t=>{const n=t.querySelector("input[name=full-name]"),o=t.querySelector("input[name=nric-number]"),i=t.querySelector("input[name=phone]"),r=t.querySelector("input[name=email]"),a={fullName:n.value,nricNumber:o.value};(null==r?void 0:r.value)&&(a.email=r.value),(null==i?void 0:i.value)&&(a.phone=i.value),e.passengers.push(a)})),I.updateBookingForm(e),t}payDeposit(){return e=this,t=void 0,o=function*(){if(!this.isValidated())return;const e=document.getElementById("pay-deposit-button"),t=document.getElementById("prev-step-button"),n=t.onclick;y.showLoading(!0),e.onclick=null,t.onclick=null;try{const o=I.getBookingForm(),i=yield a.bookDiyUmrah(o);window.location.href=i.data.paymentLink,yield new Promise((e=>setTimeout(e,2e3))),y.showLoading(!1),e.onclick=()=>this.payDeposit(),t.onclick=n}catch(o){y.showLoading(!1),e.onclick=()=>this.payDeposit(),t.onclick=n}},new((n=void 0)||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}));var e,t,n,o}populateInputs(){const e=I.getBookingForm();[...document.getElementsByClassName("pax-collection-list")].forEach((e=>{e.style.display="block"}));const t=document.getElementById("adult-collection-list"),n=document.getElementById("child-collection-list"),o=document.getElementById("infant-collection-list");t.style.display=e.totalAdult>0?"block":"none",n.style.display=e.totalChild>0?"block":"none",o.style.display=e.totalInfant>0?"block":"none",t.innerHTML="",n.innerHTML="",o.innerHTML="";for(let n=0;n<e.totalAdult-1;n++){const e=this.adultInputs.cloneNode(!0);e.querySelectorAll(".heading:last-child")[0].innerHTML=(n+2).toString(),t.appendChild(e)}for(let t=0;t<e.totalChild;t++){const e=this.childInputs.cloneNode(!0);e.querySelectorAll(".heading:last-child")[0].innerHTML=(t+1).toString(),n.appendChild(e)}for(let t=0;t<e.totalInfant;t++){const e=this.infantInputs.cloneNode(!0);e.querySelectorAll(".heading:last-child")[0].innerHTML=(t+1).toString(),o.appendChild(e)}}},A=new class{lastEndDate;list;mainInput;addButton;constructor(){this.list=document.getElementById("journey-input-list"),this.mainInput=this.list.querySelector(".journey-input"),this.addButton=document.getElementById("add-city-button"),this.list.innerHTML="",this.addInput()}onCityChanged(){const e=I.getBookingForm();e.plans=[...document.querySelectorAll(".journey-input")].map((e=>({city:{name:e.querySelector("select[name=city]").value,iataCode:"Makkah"==e.querySelector("select[name=city]").value?"JED":"MED"},startDate:e.querySelector("input[name=start-date]").value,endDate:e.querySelector("input[name=end-date]").value}))),I.updateBookingForm(e),L.populateInputs()}addInput(){const e=this.mainInput.cloneNode(!0);this.list.appendChild(e),this.setupCitySelection(),this.updateInputs()}removeInput(e){this.list.children[e].remove(),this.updateInputs()}setupCitySelection(){const e=I.getBookingForm(),t=document.querySelectorAll('select[name="city"]'),n=[...t[0].options].map((e=>e.value));t.forEach(((e,o)=>{e.onchange=()=>{const i=e.value,r=n.find((e=>e!==i));t.forEach(((e,t)=>{t!==o&&(e.value=r)})),this.onCityChanged()},1===o&&(e.value="Makkah"===t[0].value?"Madinah":"Makkah")})),t[0].value=e.plans[0].city.name}updateInputs(){const e=this.list.getElementsByClassName("journey-input"),t=document.querySelector(".remove-button-width"),n=1===e.length;Array.from(e).forEach(((e,t)=>{const o=e.querySelector('div[ms-code-input="date-range"]'),i=o.querySelector(".date-input_start"),r=o.querySelector(".date-input_end"),a=e.querySelector(".icon-button");o.id=`journey-input-${t}`,this.configureButtonDisplay(a,t,n),this.configureDateRangePicker(t,i,r)})),this.addButton.onclick=n?()=>this.addInput():null,this.addButton.style.display=n?"flex":"none",t.style.display=n?"none":"block",this.onCityChanged()}configureButtonDisplay(e,t,n){e.style.display="flex",n?(e.onclick=null,e.style.display=0===t?"none":"flex"):(e.style.pointerEvents=0===t?"none":"auto",e.onclick=0===t?null:()=>this.removeInput(t),e.style.opacity=0===t?"0%":"100%",e.style.display="flex")}configureDateRangePicker(e,t,n){const o=0===e,i=o?this.getFirstInputOptions(t,n):this.getSubsequentInputOptions(t,n);$(`#journey-input-${e}`).daterangepicker(i,((i,r)=>{0==e?(t.value=i.format("YYYY-MM-DD"),n.value=r.format("YYYY-MM-DD"),this.lastEndDate=n.value):(t.value=this.lastEndDate,n.value=i.format("YYYY-MM-DD")),o?this.updateInputs():this.onCityChanged()}))}getFirstInputOptions(e,t){const n=I.getBookingForm(),o=e.value?e.value:n.plans[0].startDate,i=t.value?t.value:n.plans[0].endDate;return e.value=o,t.value=i,this.lastEndDate=i,{opens:"center",minDate:moment().add(14,"days"),maxDate:moment().add(60,"days"),startDate:o,endDate:i,locale:this.getLocaleOptions()}}getSubsequentInputOptions(e,t){return e.value=this.lastEndDate,t.value=moment(this.lastEndDate,"YYYY-MM-DD").add(5,"days").format("YYYY-MM-DD"),e.disabled=!0,e.style.color="gray",e.style.cursor="not-allowed",{opens:"center",singleDatePicker:!0,minDate:moment(this.lastEndDate,"YYYY-MM-DD"),maxDate:moment(this.lastEndDate,"YYYY-MM-DD").add(5,"days"),locale:this.getLocaleOptions()}}getLocaleOptions(){return{format:"YYYY-MM-DD",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",weekLabel:"W",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}}},f=new class{constructor(){this.initValues(),[document.getElementById("adult-counter"),document.getElementById("child-counter"),document.getElementById("infant-counter")].forEach((e=>{e.getElementsByClassName("counter-button subtract")[0].onclick=()=>this.subtractPerson(e),e.getElementsByClassName("counter-button add")[0].onclick=()=>this.addPerson(e)})),document.getElementById("seat-class").onchange=()=>this.onChanged()}initValues(){const e=I.getBookingForm();document.getElementById("adult-counter-value").textContent=e.totalAdult.toString(),document.getElementById("child-counter-value").textContent=e.totalChild.toString(),document.getElementById("infant-counter-value").textContent=e.totalInfant.toString(),$("#seat-class").val(e.seatClass.type)}subtractPerson(e){const t="adult-counter"==e.id?1:0,n=document.getElementById(`${e.id}-value`),o=parseInt(n.textContent);n.textContent=(o<=t?t:o-1).toString(),this.onChanged()}addPerson(e){if(I.getBookingForm().totalPax>=8)return;const t=document.getElementById(`${e.id}-value`),n=parseInt(t.textContent);t.textContent=(n>=8?8:n+1).toString(),this.onChanged()}onChanged(){const e=I.getBookingForm();e.totalAdult=parseInt(document.getElementById("adult-counter-value").textContent),e.totalChild=parseInt(document.getElementById("child-counter-value").textContent),e.totalInfant=parseInt(document.getElementById("infant-counter-value").textContent),e.totalInfant>=e.totalAdult&&(document.getElementById("infant-counter-value").textContent=e.totalAdult.toString(),e.totalInfant=e.totalAdult),e.totalPax=e.totalInfant+e.totalChild+e.totalAdult;const t=document.getElementById("seat-class");e.seatClass={label:t.options[t.selectedIndex].text,type:t.value},I.updateBookingForm(e),L.populateInputs()}},E=new class{constructor(){this.departFlightOffers=[],this.returnFlightOffers=[],this.departFlightOffersIsLoading=!1,this.returnFlightOffersIsLoading=!1,this.toggleOption(),$("input[name=include-flight-booking]").on("click",(()=>{this.updateHeaderDetails(),this.toggleOption()})),this.storeElements()}storeElements(){const e=document.getElementById("depart-flight-collection-list");this.loadingFlight=e.children[0],this.selectionFlight=e.children[1],this.selectedFlight=e.children[2]}updateHeaderDetails(){const e=I.getBookingForm(),t=document.getElementById("departing-flight-header-destination"),n=document.getElementById("returning-flight-header-origin"),o=e.plans.length-1;t.innerText=e.plans[0].city.name,n.innerText=e.plans[o].city.name}showFlightLoading(e){const t=document.getElementById(e);t.innerHTML="";const n=this.loadingFlight.cloneNode(!0);t.appendChild(n)}showSelectionFlights(e,t=[]){const n=document.getElementById(e);n.innerHTML="",t.forEach((o=>{const i=this.selectionFlight.cloneNode(!0),r=this.createFlightCard(i,o);r.querySelector(".primary-button").onclick=()=>this.showSelectedFlight(e,o,t),n.appendChild(r)}))}createFlightCard(e,t){var o,i;const r=I.getBookingForm();return e.querySelector(".flight-image").src=`https://pics.avs.io/122/56/${t.schedule.carrier.marketing}@2x.png`,e.querySelector(".input-card-leading-text").innerHTML=null!==(i=null===(o=n.filter((e=>e.code==t.schedule.carrier.marketing))[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"UNKNOWN",e.querySelectorAll(".departure-time")[0].children[0].innerHTML=t.schedule.departure.time.substring(0,5),e.querySelectorAll(".departure-label")[0].innerHTML=t.schedule.departure.airport,e.querySelectorAll(".departure-time")[1].children[0].innerHTML=t.schedule.arrival.time.substring(0,5),e.querySelectorAll(".departure-label")[1].innerHTML=t.schedule.arrival.airport,e.querySelector(".flight-duration").children[0].innerHTML=c(t.schedule.departure.time,t.schedule.arrival.time),e.querySelector(".flight-duration").children[2].innerHTML=`${t.schedule.stopCount} stop`,e.getElementsByClassName("currency")[0].innerHTML=t.totalFare.currency,e.getElementsByClassName("price-text")[0].innerHTML=t.totalFare.totalPrice.toLocaleString(),e.getElementsByClassName("pax-text")[0].innerHTML=`/${r.totalPax} pax`,e}showSelectedFlight(e,t,n){const o=document.getElementById(e);o.innerHTML="";const i=this.selectedFlight.cloneNode(!0),r=this.createFlightCard(i,t);r.querySelector(".secondary-button").onclick=()=>this.removeFlight(e,n),o.appendChild(r);const a=I.getBookingForm();I.updateBookingForm(a),document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"})}removeFlight(e,t){document.getElementById(e).innerHTML="",this.showSelectionFlights(e,t);const n=I.getBookingForm();"depart-flight-collection-list"===e?n.departFlight=null:"return-flight-collection-list"===e&&(n.returnFlight=null),I.updateBookingForm(n)}toggleOption(){return d(this,void 0,void 0,(function*(){const e=I.getBookingForm();e.departFlight=null,e.returnFlight=null,I.updateBookingForm(e);const t=document.querySelector("input[name=include-flight-booking]:checked").value;document.getElementById("departure-flight-card").style.display="none",document.getElementById("return-flight-card").style.display="none","true"===t&&(document.getElementById("departure-flight-card").style.display="flex",document.getElementById("return-flight-card").style.display="flex",this.populateFlights())}))}populateFlights(){return d(this,void 0,void 0,(function*(){const e=I.getBookingForm(),t=e.plans[0],n=e.plans[e.plans.length-1];this.departFlightOffersIsLoading||(this.departFlightOffers.length<=0?(this.departFlightOffersIsLoading=!0,this.showFlightLoading("depart-flight-collection-list"),a.getFlights({bookingForm:e,originLocationCode:"KUL",destinationLocationCode:t.city.iataCode,departureDate:l(t.startDate)}).then((e=>{console.log(e),this.departFlightOffers=e.itineraries,this.departFlightOffersIsLoading=!1,this.showSelectionFlights("depart-flight-collection-list",this.departFlightOffers)}))):this.showSelectionFlights("depart-flight-collection-list",this.departFlightOffers),this.returnFlightOffersIsLoading||(this.returnFlightOffers.length<=0?(this.returnFlightOffersIsLoading=!0,this.showFlightLoading("return-flight-collection-list"),a.getFlights({bookingForm:e,originLocationCode:n.city.iataCode,destinationLocationCode:"KUL",departureDate:l(n.endDate)}).then((e=>{this.returnFlightOffers=e.itineraries,this.returnFlightOffersIsLoading=!1,this.showSelectionFlights("return-flight-collection-list",this.returnFlightOffers)}))):this.showSelectionFlights("return-flight-collection-list",this.returnFlightOffers)))}))}},v=new class{constructor(){this.hotels=[],this.hotelsIsLoading=!1,this.toggleOption(),$("input[name=include-hotel-booking]").on("click",(()=>this.toggleOption())),this.storeElements()}storeElements(){const e=document.getElementById("madinah-hotel-collection-list");this.loadingHotel=e.children[0],this.selectionHotel=e.children[1]}showHotelLoading(e){const t=document.getElementById(e);t.innerHTML="";const n=this.loadingHotel.cloneNode(!0);t.appendChild(n)}showSelectionHotels(e,t=[]){const n=document.getElementById(e);n.innerHTML="",t.forEach((e=>{const t=this.selectionHotel.cloneNode(!0),o=this.createHotelCard(t,e);n.appendChild(o)}))}createHotelCard(e,t){e.querySelector("img").src=t.imageUrl,e.querySelector(".heading").innerHTML=t.name,e.querySelector(".total-review-text").innerHTML=t.totalReview.toString(),e.querySelector(".rating").innerHTML=t.rating.toString(),e.querySelector(".price-text").innerHTML=t.doublePrice.toLocaleString();const n=e.querySelector(".meal-checkbox-input");n.querySelector(".heading").innerHTML=t.meal.name,n.querySelector(".subtitle.italic").innerHTML=t.meal.description,n.querySelector(".price-text").innerHTML=t.meal.price.toLocaleString();const o=n.querySelector("input");o.onclick=()=>this.handleMeal(o.checked,t);const i=e.querySelector(".primary-button"),r=e.querySelector(".secondary-button");i.onclick=()=>this.toggleHotelCard(e),r.onclick=()=>this.toggleHotelCard(e);const a=e.querySelector(".rating-wrapper"),l=a.children[0];a.innerHTML="";for(let e=0;e<t.totalStar;e++){const e=l.cloneNode(!0);a.appendChild(e)}const s=e.querySelectorAll(".hotel-card-option");return this.handleCounter(s,t,0),this.handleCounter(s,t,1),this.handleCounter(s,t,2),e}toggleHotelCard(e){e.querySelector(".hotel-card-option-dropdown").classList.toggle("collapsed"),e.querySelector(".primary-button").classList.toggle("hide"),e.querySelector(".secondary-button").classList.toggle("hide")}handleMeal(e,t){const n=I.getBookingForm(),o=n.hotels.findIndex((e=>e.data.id===t.id));n.hotels[o].includeMeal=e,I.updateBookingForm(n)}toggleMealCard(e){const t=e.querySelectorAll(".hotel-card-option-dropdown")[1],n=t.querySelector(".meal-checkbox-input").querySelector("input");t.classList.toggle("collapsed")&&(n.checked=!1)}handleCounter(e,t,n){e[n].querySelector(".price-text").innerHTML=[t.doublePrice,t.triplePrice,t.quadPrice][n].toLocaleString();const o=e[n].querySelector(".counter-label"),i=e[n].querySelector(".counter-button.subtract"),r=e[n].querySelector(".counter-button.add");e[n].classList.remove("is-selected"),i.onclick=()=>function(n,i){let r=parseInt(o.innerHTML);if(r<=0)return;r--;const a=I.getBookingForm();o.innerHTML=r.toString(),0==r&&n.classList.remove("is-selected");const l=a.hotels.findIndex((e=>e.data.id===t.id)),s=parseInt(e[0].querySelector(".counter-label").innerHTML),c=parseInt(e[1].querySelector(".counter-label").innerHTML),d=parseInt(e[2].querySelector(".counter-label").innerHTML);if(s+c+d>0)a.hotels[l].totalDouble=s,a.hotels[l].totalTripple=c,a.hotels[l].totalQuad=d;else{const e=n.parentElement.parentElement.parentElement,t=e.querySelector(".secondary-button");t.style.opacity="100%",t.style.pointerEvents="auto",a.hotels.splice(l,1),i(e)}I.updateBookingForm(a)}(e[n],this.toggleMealCard),r.onclick=()=>function(n,i){const r=I.getBookingForm();if(r.hotels.filter((e=>e.data.city==t.city)).reduce(((e,t)=>e+t.totalDouble+t.totalTripple+t.totalQuad),0)>=r.totalAdult)return;let a=parseInt(o.innerHTML);a++,o.innerHTML=a.toString();const l=r.hotels.findIndex((e=>e.data.id===t.id)),s=parseInt(e[0].querySelector(".counter-label").innerHTML),c=parseInt(e[1].querySelector(".counter-label").innerHTML),d=parseInt(e[2].querySelector(".counter-label").innerHTML);n.classList.add("is-selected");const u=n.parentElement.parentElement.parentElement,h=u.querySelector(".meal-checkbox-input").querySelector("input");if(-1!=l)r.hotels[l].totalDouble=s,r.hotels[l].totalTripple=c,r.hotels[l].totalQuad=d,r.hotels[l].includeMeal=h.checked;else{const e=u.querySelector(".secondary-button");e.style.opacity="0%",e.style.pointerEvents="none",r.hotels.push({totalDouble:s,totalTripple:c,totalQuad:d,includeMeal:!1,data:t}),i(u)}I.updateBookingForm(r)}(e[n],this.toggleMealCard)}populateHotels(){return e=this,t=void 0,o=function*(){if(this.hotelsIsLoading)return;this.hotels.length<=0&&(this.hotelsIsLoading=!0,this.showHotelLoading("madinah-hotel-collection-list"),this.showHotelLoading("makkah-hotel-collection-list"),this.hotels=yield a.getHotels(),this.hotelsIsLoading=!1);const e=this.hotels.filter((e=>"madinah"===e.city)),t=this.hotels.filter((e=>"makkah"===e.city));this.showSelectionHotels("madinah-hotel-collection-list",e),this.showSelectionHotels("makkah-hotel-collection-list",t)},new((n=void 0)||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}));var e,t,n,o}toggleOption(){const e=I.getBookingForm();e.hotels=[],I.updateBookingForm(e);const t=document.querySelector("input[name=include-hotel-booking]:checked").value,n=document.getElementById("madinah-hotel-card"),o=document.getElementById("makkah-hotel-card");if(n.style.display="none",o.style.display="none","true"===t){const t=e.plans.find((e=>"madinah"===e.city.name.toLowerCase())),i=e.plans.find((e=>"makkah"===e.city.name.toLowerCase()));n.style.display=t?"flex":"none",o.style.display=i?"flex":"none",this.populateHotels()}}},T=new class{constructor(){this.flights=[],this.trains=[],this.vans=[],this.flightsIsLoading=!1,this.trainsIsLoading=!1,this.vansIsLoading=!1,this.toggleOption(),$("input[name=travel-option]").on("click",(()=>this.toggleOption())),this.storeElements()}storeElements(){const e=document.getElementById("flight-transportation-collection-list"),t=document.getElementById("train-transportation-collection-list"),n=document.getElementById("van-transportation-collection-list");this.loadingFlight=e.children[0],this.selectionFlight=e.children[1],this.selectedFlight=e.children[2],this.loadingTrain=t.children[0],this.selectionTrain=t.children[1],this.selectedTrain=t.children[2],this.loadingVan=n.children[0],this.selectionVan=n.children[1]}toggleOption(){const e=I.getBookingForm();e.transportation=null,I.updateBookingForm(e);const t=document.querySelector("input[name=travel-option]:checked").value;if(document.getElementById("van-card").style.display="none",document.getElementById("flight-card").style.display="none",document.getElementById("train-card").style.display="none",!(e.plans.length<=1))switch(t){case"flight":document.getElementById("flight-card").style.display="flex",this.loadingCard=this.loadingFlight,this.selectionCard=this.selectionFlight,this.selectedCard=this.selectedFlight,this.populateFlights();break;case"train":document.getElementById("train-card").style.display="flex",this.loadingCard=this.loadingTrain,this.selectionCard=this.selectionTrain,this.selectedCard=this.selectedTrain,this.populateTrains();break;case"van":document.getElementById("van-card").style.display="flex",this.loadingCard=this.loadingVan,this.selectionCard=this.selectionVan,this.populateVans()}}showLoading(e){const t=document.getElementById(e);t.innerHTML="";const n=this.loadingCard.cloneNode(!0);t.appendChild(n)}showSelections(e,t=[]){const n=document.getElementById(e);n.innerHTML="",t.forEach((o=>{const i=this.selectionCard.cloneNode(!0),r=this.createCard(i,o);r.querySelector(".primary-button").onclick=()=>this.showSelected(e,o,t),n.appendChild(r)}))}showVanSelections(e,t=[]){const n=document.getElementById(e);n.innerHTML="",t.forEach((e=>{const t=this.selectionCard.cloneNode(!0),o=this.createCard(t,e);n.appendChild(o)}))}showSelected(e,t,n=[]){const o=document.getElementById(e);o.innerHTML="";const i=this.selectedCard.cloneNode(!0),r=this.createCard(i,t);r.querySelector(".secondary-button").onclick=()=>this.removeItem(e,n),o.appendChild(r);const a=I.getBookingForm();"schedule"in t&&(a.transportation=t),document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"}),I.updateBookingForm(a)}removeItem(e,t=[]){document.getElementById(e).innerHTML="",this.showSelections(e,t);const n=I.getBookingForm();n.transportation=null,I.updateBookingForm(n)}createCard(e,t){return"hasAcHeater"in t?e=this.createVanCard(e,t):("schedule"in t||"schedule"in t)&&(e=this.createFlightCard(e,t)),e}createVanCard(e,t){e.querySelector("img").src=t.imageUrl,e.querySelector(".heading").innerHTML=t.name;const n=e.querySelectorAll(".icon-label");n[0].lastChild.firstChild.innerHTML=t.totalSeat.toString(),n[1].lastChild.firstChild.innerHTML=t.totalLuggage.toString(),n[2].lastChild.firstChild.innerHTML=t.totalDoor.toString(),n[3].style.display=t.hasAcHeater?"flex":"none",e.querySelector(".price-text").innerHTML=t.price.toLocaleString();const o=e.querySelector(".counter-label"),i=e.querySelector(".counter-button.subtract"),r=e.querySelector(".counter-button.add");return i.onclick=()=>{let n=parseInt(o.innerHTML);if(n<=0)return;n--;const i=I.getBookingForm();o.innerHTML=n.toString(),0==n&&e.classList.remove("is-selected");const r=i.transportation.findIndex((e=>e.data.id===t.id));n>0?i.transportation[r].totalVehicles=n:(i.transportation.splice(r,1),0==i.transportation.length&&(i.transportation=null)),I.updateBookingForm(i)},r.onclick=()=>{var n,i,r,a;const l=I.getBookingForm(),s=(null!==(n=l.transportation)&&void 0!==n?n:[]).reduce(((e,t)=>e+t.totalVehicles),0);if(s>=l.totalAdult)return;let c=parseInt(o.innerHTML);c++,o.innerHTML=c.toString();const d=(null!==(i=l.transportation)&&void 0!==i?i:[]).findIndex((e=>e.data.id===t.id));e.classList.add("is-selected"),-1!=d?l.transportation[d].totalVehicles=c:(null!==(r=l.transportation)&&void 0!==r||(l.transportation=[]),(null!==(a=l.transportation)&&void 0!==a?a:[]).push({totalVehicles:c,data:t})),I.updateBookingForm(l)},e}createFlightCard(e,t){var o,i;const r=I.getBookingForm();return e.querySelector(".flight-image").src=`https://pics.avs.io/122/56/${t.schedule.carrier.marketing}@2x.png`,e.querySelector(".input-card-leading-text").innerHTML=null!==(i=null===(o=n.filter((e=>e.code==t.schedule.carrier.marketing))[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"UNKNOWN",e.querySelectorAll(".departure-time")[0].children[0].innerHTML=t.schedule.departure.time.substring(0,5),e.querySelectorAll(".departure-label")[0].innerHTML=t.schedule.departure.airport,e.querySelectorAll(".departure-time")[1].children[0].innerHTML=t.schedule.arrival.time.substring(0,5),e.querySelectorAll(".departure-label")[1].innerHTML=t.schedule.arrival.airport,e.querySelector(".flight-duration").children[0].innerHTML=c(t.schedule.departure.time,t.schedule.arrival.time),e.querySelector(".flight-duration").children[2].innerHTML=`${t.schedule.stopCount} stop`,e.getElementsByClassName("currency")[0].innerHTML=t.totalFare.currency,e.getElementsByClassName("price-text")[0].innerHTML=t.totalFare.totalPrice.toLocaleString(),e.getElementsByClassName("pax-text")[0].innerHTML=`/${r.totalPax} pax`,e}populateVans(){return u(this,void 0,void 0,(function*(){if(this.vansIsLoading)return;const e="van-transportation-collection-list";this.vans.length<=0&&(this.vansIsLoading=!0,this.showLoading(e),this.vans=yield a.getVans(),this.vansIsLoading=!1),this.showVanSelections(e,this.vans)}))}populateFlights(){return u(this,void 0,void 0,(function*(){if(this.flightsIsLoading)return;const e="flight-transportation-collection-list";if(this.flights.length<=0){this.flightsIsLoading=!0,this.showLoading(e);const t=I.getBookingForm(),n=t.plans.length-1,o=yield a.getFlights({bookingForm:t,originLocationCode:t.plans[0].city.iataCode,destinationLocationCode:t.plans[n].city.iataCode,departureDate:l(t.plans[0].endDate)});this.flights=o.itineraries,this.flightsIsLoading=!1}this.showSelections(e,this.flights)}))}populateTrains(){return u(this,void 0,void 0,(function*(){if(this.trainsIsLoading)return;const e="train-transportation-collection-list";if(this.trains.length<=0){this.trainsIsLoading=!0,this.showLoading(e);const t=I.getBookingForm(),n=t.plans.length-1,o=yield a.getFlights({bookingForm:t,originLocationCode:t.plans[0].city.iataCode,destinationLocationCode:t.plans[n].city.iataCode,departureDate:l(t.plans[0].endDate)});this.trains=o.itineraries,this.trainsIsLoading=!1}this.showSelections(e,this.trains)}))}},C=new class{constructor(){this.visas=[],this.insurances=[],this.visaIsLoading=!1,this.insuranceIsLoading=!1,this.storeElements(),this.populateVisas(),this.populateInsurances()}storeElements(){const e=document.getElementById("visa-collection-list");this.loadingVisa=e.children[0],this.selectionVisa=e.children[1],this.noVisa=e.children[2],this.noVisa.onclick=()=>{const e=I.getBookingForm();e.visa=null,I.updateBookingForm(e)};const t=document.getElementById("insurance-collection-list");this.loadingInsurance=t.children[0],this.selectionInsurance=t.children[1]}populateVisas(){return h(this,void 0,void 0,(function*(){this.visaIsLoading||(this.visaIsLoading=!0,this.showVisaLoading(),this.visas=yield a.getVisas(),this.visaIsLoading=!1,this.showSelectionVisas(this.visas))}))}populateInsurances(){return h(this,void 0,void 0,(function*(){this.insuranceIsLoading||(this.insuranceIsLoading=!0,this.showInsuranceLoading(),this.insurances=yield a.getInsurances(),this.insuranceIsLoading=!1,this.showSelectionInsurances(this.insurances))}))}showVisaLoading(){const e=document.getElementById("visa-collection-list");e.innerHTML="";const t=this.loadingVisa.cloneNode(!0);e.appendChild(t)}showInsuranceLoading(){const e=document.getElementById("insurance-collection-list");e.innerHTML="";const t=this.loadingInsurance.cloneNode(!0);e.appendChild(t)}showSelectionVisas(e){if(e.length<=0)return;const t=document.getElementById("visa-collection-list");t.innerHTML="",e.forEach((e=>{const n=this.selectionVisa.cloneNode(!0),o=this.createVisaCard(n,e);t.appendChild(o)})),t.appendChild(this.noVisa)}showSelectionInsurances(e){if(e.length<=0)return;const t=document.getElementById("insurance-collection-list");t.innerHTML="",e.forEach((e=>{const n=this.selectionInsurance.cloneNode(!0),o=this.createInsuranceCard(n,e);t.appendChild(o)}))}createVisaCard(e,t){return e.querySelector(".heading").innerHTML=t.name,e.querySelector(".price-text").innerHTML=t.price.toLocaleString(),e.querySelector(".subtitle").innerHTML=t.description,e.querySelector("input").value=t.id,e.onclick=()=>{const e=I.getBookingForm();e.visa=t,I.updateBookingForm(e)},e}createInsuranceCard(e,t){return e.querySelector(".heading").innerHTML=t.name,e.querySelector(".price-text").innerHTML=t.price.toLocaleString(),e.querySelector(".subtitle").innerHTML=t.description,e.querySelector("input").value=t.id,e.onclick=()=>{const e=document.querySelectorAll("input[name=insurance]:checked"),t=I.getBookingForm(),n=[];for(let t=0;t<e.length;t++){const o=e[t],i=this.insurances.find((e=>e.id===o.value));i&&n.push(i)}t.insurances=n,I.updateBookingForm(t)},e}},N=new class{constructor(){this.addOnServices=[],this.addOnServiceIsLoading=!1;const e=document.querySelectorAll(".tour-guide-service-input");for(let t=0;t<e.length;t++){const n=e[t];n.onclick=()=>this.toggleTourGuideOption(n)}this.handleCounter(),this.storeElements(),this.populateAddOnServices()}storeElements(){const e=document.getElementById("add-on-service-collection-list");this.loadingAddOnService=e.children[0],this.selectionAddOnService=e.children[1]}populateAddOnServices(){return e=this,t=void 0,o=function*(){this.addOnServiceIsLoading||(this.addOnServiceIsLoading=!0,this.showAddOnLoading(),this.addOnServices=yield a.getAddOnServices(),this.addOnServiceIsLoading=!1,this.showSelectionAddOnServices(this.addOnServices))},new((n=void 0)||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}));var e,t,n,o}showAddOnLoading(){const e=document.getElementById("add-on-service-collection-list");e.innerHTML="";const t=this.loadingAddOnService.cloneNode(!0);e.appendChild(t)}showSelectionAddOnServices(e){if(e.length<=0)return;const t=document.getElementById("add-on-service-collection-list");t.innerHTML="",e.forEach((e=>{const n=this.selectionAddOnService.cloneNode(!0),o=this.createAddOnServiceCard(n,e);t.appendChild(o)}))}createAddOnServiceCard(e,t){return e.querySelector(".heading").innerHTML=t.name,e.querySelector(".price-text").innerHTML=t.price.toLocaleString(),e.querySelector(".subtitle").innerHTML=t.description,e.querySelector("input").value=t.id,e.onclick=()=>{const e=document.querySelectorAll("input[name=add-on-service]:checked"),t=I.getBookingForm(),n=[];for(let t=0;t<e.length;t++){const o=e[t],i=this.addOnServices.find((e=>e.id===o.value));i&&n.push(i)}t.addOnServices=n,I.updateBookingForm(t)},e}toggleTourGuideOption(e){var t,n,o,i;const r=I.getBookingForm(),a=document.querySelector("input[name=tour-guide]:checked"),l=e.querySelector(".heading").innerHTML,s=null!==(n=null===(t=e.querySelector(".price-text"))||void 0===t?void 0:t.textContent)&&void 0!==n?n:"";switch(a.value){case"day-trip":r.tourGuide={type:l,price:s,totalDays:null!==(i=null===(o=r.tourGuide)||void 0===o?void 0:o.totalDays)&&void 0!==i?i:1},this.showCounter(!0);break;case"full-trip":r.tourGuide={type:l,price:s},this.showCounter(!1);break;default:r.tourGuide=null,this.showCounter(!1)}I.updateBookingForm(r)}showCounter(e){document.querySelector(".service-option-dropdown").classList.toggle("collapsed",!e),e||(document.querySelector(".day-trip-counter-input").querySelector(".counter-label").innerHTML="1")}handleCounter(){const e=document.querySelector(".day-trip-counter-input"),t=e.querySelector(".counter-label"),n=e.querySelector(".counter-button.add");e.querySelector(".counter-button.subtract").onclick=()=>function(e){let t=parseInt(e.innerHTML);if(t<=1)return;t--;const n=I.getBookingForm();e.innerHTML=t.toString(),n.tourGuide.totalDays=t,I.updateBookingForm(n)}(t),n.onclick=()=>function(e){let t=parseInt(e.innerHTML);if(t>=I.getTotalDays())return;t++;const n=I.getBookingForm();e.innerHTML=t.toString(),n.tourGuide.totalDays=t,I.updateBookingForm(n)}(t)}};umrah_diy=t})();